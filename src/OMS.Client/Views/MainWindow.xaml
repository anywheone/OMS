<Window x:Class="OMS.Client.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:prism="http://prismlibrary.com/"
        prism:ViewModelLocator.AutoWireViewModel="True"
        Title="OMS - Order Management System"
        Height="800"
        Width="1400"
        MinHeight="600"
        MinWidth="1000"
        WindowStartupLocation="Manual"
        WindowState="Normal"
        ResizeMode="CanResize"
        Background="{StaticResource BackgroundBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <Border Grid.Row="0"
                Background="{StaticResource PrimaryBrush}"
                Padding="20,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="OMS - Order Management System"
                           FontSize="20"
                           FontWeight="Bold"
                           Foreground="White"
                           VerticalAlignment="Center"/>

                <Button Grid.Column="2"
                        Content="ðŸ“š ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ä¸€è¦§"
                        FontSize="13"
                        Foreground="White"
                        Background="Transparent"
                        BorderBrush="White"
                        BorderThickness="1"
                        Padding="15,5"
                        Margin="0,0,15,0"
                        Cursor="Hand"
                        VerticalAlignment="Center"
                        Command="{Binding ShowControlLibraryCommand}">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="4"
                                                Padding="{TemplateBinding Padding}">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="White"/>
                                                <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="True">
                                                <Setter Property="Opacity" Value="0.8"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>

                <TextBlock Grid.Column="3"
                           Text="ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰"
                           FontSize="14"
                           Foreground="White"
                           VerticalAlignment="Center"
                           Margin="0,0,0,0"/>
            </Grid>
        </Border>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ -->
        <Grid Grid.Row="1" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- å·¦å´: æ³¨æ–‡å…¥åŠ›ãƒ‘ãƒãƒ« -->
            <Border Grid.Column="0"
                    Style="{StaticResource CardStyle}"
                    Margin="0,0,5,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">
                        <TextBlock Text="æ–°è¦æ³¨æ–‡"
                                   FontSize="18"
                                   FontWeight="Bold"
                                   Margin="0,0,0,15"/>

                        <!-- éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ -->
                        <TextBlock Text="éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰" FontWeight="SemiBold" Margin="0,5,0,3"/>
                        <TextBox Style="{StaticResource InputTextBoxStyle}"
                                 Text="{Binding SecurityId, UpdateSourceTrigger=PropertyChanged}"/>

                        <!-- å£²è²·åŒºåˆ† -->
                        <TextBlock Text="å£²è²·åŒºåˆ†" FontWeight="SemiBold" Margin="0,10,0,3"/>
                        <ComboBox Style="{StaticResource InputComboBoxStyle}"
                                  SelectedValue="{Binding Side}"
                                  SelectedValuePath="Tag">
                            <ComboBoxItem Content="è²·ã„" Tag="BUY" IsSelected="True"/>
                            <ComboBoxItem Content="å£²ã‚Š" Tag="SELL"/>
                        </ComboBox>

                        <!-- æ³¨æ–‡ã‚¿ã‚¤ãƒ— -->
                        <TextBlock Text="æ³¨æ–‡ã‚¿ã‚¤ãƒ—" FontWeight="SemiBold" Margin="0,10,0,3"/>
                        <ComboBox Style="{StaticResource InputComboBoxStyle}"
                                  SelectedValue="{Binding OrderType}"
                                  SelectedValuePath="Tag">
                            <ComboBoxItem Content="æˆè¡Œ" Tag="MARKET" IsSelected="True"/>
                            <ComboBoxItem Content="æŒ‡å€¤" Tag="LIMIT"/>
                            <ComboBoxItem Content="é€†æŒ‡å€¤" Tag="STOP"/>
                            <ComboBoxItem Content="é€†æŒ‡å€¤ä»˜æŒ‡å€¤" Tag="STOP_LIMIT"/>
                        </ComboBox>

                        <!-- æ•°é‡ -->
                        <TextBlock Text="æ•°é‡" FontWeight="SemiBold" Margin="0,10,0,3"/>
                        <TextBox Style="{StaticResource InputTextBoxStyle}"
                                 Text="{Binding Quantity, UpdateSourceTrigger=PropertyChanged}"/>

                        <!-- ä¾¡æ ¼ -->
                        <TextBlock Text="ä¾¡æ ¼" FontWeight="SemiBold" Margin="0,10,0,3"/>
                        <TextBox Style="{StaticResource InputTextBoxStyle}"
                                 Text="{Binding Price, UpdateSourceTrigger=PropertyChanged}"
                                 IsEnabled="{Binding IsPriceEnabled}"/>

                        <!-- æœ‰åŠ¹æœŸé™ -->
                        <TextBlock Text="æœ‰åŠ¹æœŸé™" FontWeight="SemiBold" Margin="0,10,0,3"/>
                        <ComboBox Style="{StaticResource InputComboBoxStyle}"
                                  SelectedValue="{Binding TimeInForce}"
                                  SelectedValuePath="Tag">
                            <ComboBoxItem Content="å½“æ—¥ä¸­" Tag="DAY" IsSelected="True"/>
                            <ComboBoxItem Content="ç„¡æœŸé™" Tag="GTC"/>
                            <ComboBoxItem Content="å³æ™‚åŸ·è¡Œ" Tag="IOC"/>
                            <ComboBoxItem Content="å…¨é‡ç´„å®š" Tag="FOK"/>
                        </ComboBox>

                        <!-- æ³¨æ–‡ãƒœã‚¿ãƒ³ -->
                        <Button Content="æ³¨æ–‡å®Ÿè¡Œ"
                                Style="{StaticResource PrimaryButtonStyle}"
                                Command="{Binding PlaceOrderCommand}"
                                Margin="0,20,0,10"/>

                        <Button Content="ã‚¯ãƒªã‚¢"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Command="{Binding ClearCommand}"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- å³å´: ã‚¿ãƒ–ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
            <Border Grid.Column="1"
                    Style="{StaticResource CardStyle}"
                    Margin="5,0,0,0">
                <TabControl>
                    <!-- æ³¨æ–‡ä¸€è¦§ã‚¿ãƒ– -->
                    <TabItem Header="æ³¨æ–‡ä¸€è¦§">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <!-- ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ -->
                            <Border Grid.Row="0" Padding="10" Background="#F5F5F5">
                                <StackPanel Orientation="Horizontal">
                                    <Button Content="æ›´æ–°"
                                            Style="{StaticResource SecondaryButtonStyle}"
                                            Command="{Binding RefreshOrdersCommand}"
                                            Margin="0,0,5,0"/>
                                    <Button Content="ã‚­ãƒ£ãƒ³ã‚»ãƒ«" Style="{StaticResource SecondaryButtonStyle}" Margin="0,0,5,0"/>
                                </StackPanel>
                            </Border>

                            <!-- ãƒ‡ãƒ¼ã‚¿ã‚°ãƒªãƒƒãƒ‰ -->
                            <DataGrid Grid.Row="1"
                                      Style="{StaticResource DataGridStyle}"
                                      ItemsSource="{Binding Orders}"
                                      AutoGenerateColumns="False">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="æ³¨æ–‡No" Binding="{Binding OrderNo}" Width="100"/>
                                    <DataGridTextColumn Header="æ—¥æ™‚" Binding="{Binding OrderDate, StringFormat='{}{0:yyyy/MM/dd HH:mm}'}" Width="130"/>
                                    <DataGridTextColumn Header="éŠ˜æŸ„" Binding="{Binding SecurityId}" Width="80"/>
                                    <DataGridTextColumn Header="å£²è²·" Binding="{Binding Side}" Width="60"/>
                                    <DataGridTextColumn Header="ã‚¿ã‚¤ãƒ—" Binding="{Binding OrderType}" Width="80"/>
                                    <DataGridTextColumn Header="æ•°é‡" Binding="{Binding Quantity}" Width="80"/>
                                    <DataGridTextColumn Header="ä¾¡æ ¼" Binding="{Binding Price}" Width="80"/>
                                    <DataGridTextColumn Header="ç´„å®šæ•°" Binding="{Binding FilledQuantity}" Width="80"/>
                                    <DataGridTextColumn Header="ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹" Binding="{Binding Status}" Width="100"/>
                                    <DataGridTextColumn Header="å‚™è€ƒ" Binding="{Binding Notes}" Width="*"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                    </TabItem>

                    <!-- ç´„å®šå±¥æ­´ã‚¿ãƒ– -->
                    <TabItem Header="ç´„å®šå±¥æ­´">
                        <DataGrid x:Name="ExecutionsDataGrid"
                                  Style="{StaticResource DataGridStyle}"
                                  AutoGenerateColumns="False">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ç´„å®šNo" Width="100"/>
                                <DataGridTextColumn Header="æ³¨æ–‡No" Width="100"/>
                                <DataGridTextColumn Header="æ—¥æ™‚" Width="130"/>
                                <DataGridTextColumn Header="éŠ˜æŸ„" Width="80"/>
                                <DataGridTextColumn Header="å£²è²·" Width="60"/>
                                <DataGridTextColumn Header="æ•°é‡" Width="80"/>
                                <DataGridTextColumn Header="å˜ä¾¡" Width="80"/>
                                <DataGridTextColumn Header="é‡‘é¡" Width="100"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </TabItem>

                    <!-- ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚¿ãƒ– -->
                    <TabItem Header="ãƒã‚¸ã‚·ãƒ§ãƒ³">
                        <DataGrid x:Name="PositionsDataGrid"
                                  Style="{StaticResource DataGridStyle}"
                                  AutoGenerateColumns="False">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="éŠ˜æŸ„" Width="100"/>
                                <DataGridTextColumn Header="æ•°é‡" Width="100"/>
                                <DataGridTextColumn Header="å¹³å‡å–å¾—å˜ä¾¡" Width="120"/>
                                <DataGridTextColumn Header="ç¾åœ¨å€¤" Width="100"/>
                                <DataGridTextColumn Header="è©•ä¾¡é¡" Width="120"/>
                                <DataGridTextColumn Header="æç›Š" Width="120"/>
                                <DataGridTextColumn Header="æç›ŠçŽ‡" Width="100"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </TabItem>
                </TabControl>
            </Border>
        </Grid>

        <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ -->
        <Border Grid.Row="2"
                Background="{StaticResource SurfaceBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="0,1,0,0"
                Padding="10,5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="Ready"
                           FontSize="12"
                           VerticalAlignment="Center"/>

                <TextBlock Grid.Column="1"
                           Text="Version 1.0.0"
                           FontSize="12"
                           VerticalAlignment="Center"/>
            </Grid>
        </Border>
    </Grid>
</Window>
